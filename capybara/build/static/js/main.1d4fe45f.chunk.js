(this.webpackJsonpcapybara=this.webpackJsonpcapybara||[]).push([[0],{41:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),o=n.n(r),i=n(6),l=n.n(i),c=(n(41),n(7)),s=n(9),u=n(10),d=n(32),v=n.n(d),y=n(11),m=(n(56),function(e){var t=e.children,n=e.to,r=e.styles,o=e.dimensions,i=o.width,l=o.height,c=(o.rowHeight,"");try{c=new URL(n).hostname}catch(u){}return Object(a.jsxs)("a",{style:Object(s.a)(Object(s.a)({},r),{},{padding:1===i&&1===l?"0.4em":""}),className:"capytile--link",href:n,onDragStart:function(e){return e.preventDefault()},onContextMenu:function(e){e.preventDefault()},children:[Object(a.jsx)("img",{className:"capytile--link__icon",src:c?"https://api.faviconkit.com/".concat(c,"/144"):"https://www.iconsdb.com/icons/preview/red/error-xxl.png",alt:"favicon",style:{width:1===i?"100%":""}}),Object(a.jsx)("div",{className:"capytile--link__title",style:{display:1===i&&1===l?"none":"block"},children:t})]})}),f=function(e){var t=e.type,n=e.content,r=e.styles,o=e.dimensions;switch(t){case"link":return Object(a.jsx)(m,{styles:r,to:n.url,dimensions:o,children:n.title});default:throw new Error("Invalid capybara tile type recieved while mapping types to Components")}},b=function e(t){var n;t.preventDefault(),null===(n=t.target)||void 0===n||n.removeEventListener("click",e)},p=function e(t){var n,a;null===(n=t.target)||void 0===n||n.addEventListener("click",b),null===(a=t.target)||void 0===a||a.removeEventListener("mousemove",e)},j=n(15),h=n(5),g=function(){if(window.localStorage){var e=window.localStorage.getItem("layout");if(e)try{return JSON.parse(e)}catch(t){throw new Error("Error occured while parsing local storage layout data")}}return null}()||[{type:"link",data:{grid:{i:"x",x:0,y:0,w:2,h:2},content:{title:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Fuga voluptatibus minus incidunt aliquam non ex at!",url:"https://github.com"},styles:{backgroundColor:"#ffffff",color:"#000000"}}},{type:"link",data:{grid:{i:"y",x:2,y:0,w:2,h:2},content:{title:"Distinctio sapiente officia, laudantium, impedit accusamus obcaecati eius ipsum dolorum.",url:"https://yandex.ru"},styles:{backgroundColor:"#ffffff",color:"#000000"}}},{type:"link",data:{grid:{i:"z",x:4,y:0,w:2,h:2},content:{title:"Maxime repellendus eveniet aliquam eius quia, neque aliquid provident quisquam ea laboriosam velit.",url:"https://google.com"},styles:{backgroundColor:"#ffffff",color:"#000000"}}}],O=Object(h.b)({name:"layout",initialState:g,reducers:{setLayout:function(e,t){return t.payload},setLayoutItemData:function(e,t){var n=function(e,t){var n=e.find((function(e){return e.data.grid.i===t}));if(!n)throw new Error("Error occured while setting tile's layout data to Redux state");return n}(e,t.payload.id);n.data.content=t.payload.content,n.data.styles=t.payload.styles}}}),x=O.actions,_=x.setLayout,w=x.setLayoutItemData,k=O.reducer,N=(n(57),n(33)),S=Object(h.b)({name:"overlay",initialState:{isActive:!1,type:null,data:null},reducers:{setOverlay:function(e,t){return t.payload},unsetOverlay:function(e){e.isActive=!1}}}),C=S.actions,E=C.setOverlay,D=C.unsetOverlay,L=S.reducer,I=function(e){var t=e.isOverlayed,n=Object(c.b)(),o=Object(r.useRef)(null),i=function(e){var t=l.map((function(t,n){var a=Object(u.cloneDeep)(t);return a.data.grid=e[n],a}));n(_(t))},l=Object(u.cloneDeep)(Object(c.c)((function(e){return e.appState.layout}))),d=function(e){var t=function(){if(e.current)return{width:e.current.offsetWidth,height:e.current.offsetHeight};throw new Error("ref.current in capybara container is currently null")},n=Object(r.useState)({width:0,height:0}),a=Object(j.a)(n,2),o=a[0],i=a[1];return Object(r.useEffect)((function(){var n=function(){i(t())};return e.current&&i(t()),window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[e]),o}(o),m=d.width,h=(d.height,m/100),g=(m-21*h)/20,O={className:"capybara",containerPadding:[20,20],cols:20,width:m,rowHeight:g,margin:[h,h],verticalCompact:!0,isDraggable:!0,isResizable:!0,isBounded:!1,useCSSTransforms:!0,preventCollision:!1,onResize:function(e,t,n,a,r,o){i(e)},onResizeStart:function(e,t,n,a,r,o){o.parentElement.style.zIndex="1000"},onResizeStop:function(e,t,n,a,r,o){i(e),o.parentElement.style.zIndex="0"},onDragStart:function(e,t,n,a,r,o){var i;null===(i=r.target)||void 0===i||i.addEventListener("mousemove",p),o.style.zIndex="100"},onDragStop:function(e,t,n,a,r,o){o.style.zIndex="0",Object(N.setTimeout)((function(){var e;null===(e=r.target)||void 0===e||e.removeEventListener("click",b)}),0),i(e)}};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(y.b,{id:"same_unique_identifier",children:Object(a.jsx)("div",{className:"capybara",id:"capybara",ref:o,style:t?{filter:"blur(1.1px) brightness(70%)",transition:"all 0.3s ease"}:void 0,children:Object(a.jsx)(v.a,Object(s.a)(Object(s.a)({},O),{},{children:l.map((function(e){var t=e.type,r=e.data;return Object(a.jsx)("div",{className:"capybara__tile-container","data-grid":r.grid,onContextMenu:function(){n(E({isActive:!0,type:"edit",data:{id:r.grid.i,type:t}}))},children:Object(a.jsx)(f,{type:t,content:r.content,styles:r.styles,dimensions:{rowHeight:g,width:r.grid.w,height:r.grid.h}})},r.grid.i)}))}))})}),Object(a.jsxs)(y.a,{id:"same_unique_identifier",children:[Object(a.jsx)(y.c,{data:{foo:"bar"},onClick:function(){n(E({isActive:!0,type:"settings",data:null}))},children:"Settings"}),Object(a.jsx)(y.c,{data:{foo:"bar"},onClick:function(){console.log(222)},children:"Add new bookmark"}),Object(a.jsx)(y.c,{divider:!0}),Object(a.jsx)(y.c,{data:{foo:"bar"},onClick:function(){console.log(111)},children:"Add new folder"})]})]})},z=n(65),F=function(e){var t=e.inputsData.content,n=t.url,r=t.title,o=e.onInputChange;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"overlay-form__group",children:[Object(a.jsx)("label",{className:"overlay-form__label",htmlFor:"overlay-edit-url",children:"URL:"}),Object(a.jsx)("input",{className:"overlay-form__input overlay-form__input--text",name:"url",type:"text",id:"overlay-edit-url",value:n||"",onChange:o})]}),Object(a.jsxs)("div",{className:"overlay-form__group",children:[Object(a.jsx)("label",{className:"overlay-form__label",htmlFor:"overlay-edit-title",children:"Link title:"}),Object(a.jsx)("input",{className:"overlay-form__input overlay-form__input--text",name:"title",type:"text",id:"overlay-edit-title",value:r||"",onChange:o})]})]})},A=function(e,t,n){switch(e){case"link":return Object(a.jsx)(F,{inputsData:t,onInputChange:n});default:throw new Error("Invalid overlay form type recieved in EditTileForm component")}},R=(n(60),function(e){var t=e.id,n=e.type,o=Object(c.b)(),i=Object(u.cloneDeep)(Object(c.c)((function(e){return e.appState.layout.find((function(e){return e.data.grid.i===t}))})));if(!i)throw new Error("No tile found under provided ID");var l=Object(r.useState)({id:t,content:i.data.content,styles:i.data.styles}),s=Object(j.a)(l,2),d=s[0],v=s[1],y=function(e){v((function(t){var n=e.target.name,a=e.target.value,r=Object(u.cloneDeep)(t);return r.styles[n]=a,r}))};return Object(a.jsxs)("form",{className:"overlay__overlay-form overlay-form",onSubmit:function(e){e.preventDefault(),o(w(d)),o(D())},onClick:function(e){return e.stopPropagation()},children:[Object(a.jsx)("div",{className:"overlay-form__tile-preview"}),Object(a.jsxs)("div",{className:"overlay-form__edit",children:[Object(a.jsx)("input",{type:"hidden",value:t}),Object(a.jsx)("fieldset",{className:"overlay-form__fieldset",children:A(n,d,(function(e){v((function(t){var n=e.target.name,a=e.target.value,r=Object(u.cloneDeep)(t);return r.content[n]=a,r}))}))}),Object(a.jsxs)("fieldset",{className:"overlay-form__fieldset overlay-form__fieldset--grid-horizontal",children:[Object(a.jsxs)("div",{className:"overlay-form__group",children:[Object(a.jsx)("label",{className:"overlay-form__label",htmlFor:"overlay-edit-backgroundColor",children:"Background color:"}),Object(a.jsx)("div",{className:"overlay-form__color-display",style:{backgroundColor:d.styles.backgroundColor,boxShadow:"0 0 10px 0 ".concat(d.styles.backgroundColor)},children:Object(a.jsx)("input",{className:"overlay-form__input overlay-form__input--color",name:"backgroundColor",type:"color",id:"overlay-edit-backgroundColor",value:d.styles.backgroundColor||"",onChange:y})})]}),Object(a.jsxs)("div",{className:"overlay-form__group",children:[Object(a.jsx)("label",{className:"overlay-form__label",htmlFor:"overlay-edit-color",children:"Font color:"}),Object(a.jsx)("div",{className:"overlay-form__color-display",style:{backgroundColor:d.styles.color,boxShadow:"0 0 10px 0 ".concat(d.styles.color)},children:Object(a.jsx)("input",{className:"overlay-form__input overlay-form__input--color",name:"color",type:"color",id:"overlay-edit-color",value:d.styles.color||"",onChange:y})})]})]}),Object(a.jsx)("button",{className:"overlay__submit",type:"submit",children:"Save"})]})]})}),q=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"overlay-form__group",children:[Object(a.jsx)("label",{className:"overlay-form__label",htmlFor:"overlay-edit-url",children:"URL:"}),Object(a.jsx)("input",{className:"overlay-form__input overlay-form__input--text",name:"url",type:"text",id:"overlay-edit-url",value:url||""})]}),Object(a.jsxs)("div",{className:"overlay-form__group",children:[Object(a.jsx)("label",{className:"overlay-form__label",htmlFor:"overlay-edit-title",children:"Link title:"}),Object(a.jsx)("input",{className:"overlay-form__input overlay-form__input--text",name:"title",type:"text",id:"overlay-edit-title",value:title||""})]})]})},B=function(e){var t=e.type,n=e.data;if("edit"===t&&!n)throw new Error("One of the props provided to OverlayContent Component is empty.");switch(t){case"edit":return Object(a.jsx)(R,Object(s.a)({},n));case"settings":return Object(a.jsx)(q,{});default:throw new Error("Invalid overlay type recieved while mapping types to Components")}},H=(n(61),function(e){var t=e.type,n=e.data,r=e.isActive,o=Object(c.b)();return Object(a.jsx)(z.a,{in:r,timeout:300,classNames:{enterActive:"overlay--active",enterDone:"overlay--active",exit:"overlay--disappearing"},unmountOnExit:!0,children:Object(a.jsx)("div",{role:"button",className:"overlay",onClick:function(){return o(D())},children:Object(a.jsx)(B,{type:t,data:n})})})}),J=(n(62),function(){var e=Object(c.c)((function(e){return e.ui.overlay})),t=e.type,n=e.data,r=e.isActive;return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(I,{isOverlayed:r}),Object(a.jsx)(H,{type:t,data:n,isActive:r})]})}),M=n(8),T=n(34),U=Object(h.b)({name:"styles",initialState:{rounding:0},reducers:{setRounding:function(e,t){e.rounding=t.payload}}});Object(T.a)(U.actions);var W=U.reducer,P=Object(M.c)({styles:W,overlay:L}),$={username:null},G=Object(h.b)({name:"authorisation",initialState:$,reducers:{unauthorise:function(){return $},authorise:function(e,t){return{username:t.payload}}}}),K=G.actions,Q=(K.authorise,K.unauthorise,G.reducer),V=Object(M.c)({authorisation:Q}),X=Object(M.c)({layout:k}),Y=Object(M.c)({domainData:V,appState:X,ui:P}),Z=Object(h.a)({reducer:Y}),ee=Z.getState().appState.layout;window.localStorage&&Z.subscribe((function(){var e=Z.getState().appState.layout;e!==ee&&(ee=e,window.localStorage.setItem("layout",JSON.stringify(e)))}));var te=Z;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(c.a,{store:te,children:Object(a.jsx)(J,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[63,1,2]]]);
//# sourceMappingURL=main.1d4fe45f.chunk.js.map